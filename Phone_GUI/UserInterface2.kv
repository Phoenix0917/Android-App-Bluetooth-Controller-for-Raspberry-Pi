#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#: import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import utils kivy.utils

WindowManager: # root rule (can be any widget)
    transition: FadeTransition()
    ControlWindow: # class inside window manager
    BluetoothWindow: # class inside window manager

<ControlWindow>: # class rule
    name: "control"

    FloatLayout:
        size: root.width, root.height

        Image:
            source: 'Images_Used/background6.jpg'
            allow_stretch: True
            keep_ratio: False
        Button:
            pos_hint: {'x': 0.01, 'top': 0.99}
            background_normal: ''
            background_color: '#266352'
            font_size: 10
            size_hint: .1, .1
            on_press:
                root.manager.current = "bluetooth"  
            
            Image:
                source: 'Images_Used/BT_Before.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height
                keep_ratio: False

        Label:
            id: status_indicator
            text: "Unpaired"
            font_size: self.width/8
            size_hint: 0.12, 0.05
            pos_hint: {'right': 0.99, 'top': 0.99}
            color: '#b5f7e6'
            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex('#266352')
                Rectangle:
                    size: self.size
                    pos: self.pos

        ModifiedSlider:
            id: left_motor_control
            min: -100
            max: 100
            step: 1
            value: ((self.max - self.min) / 2) + self.min
            orientation: "vertical"
            pos_hint: {'x': 0.25, 'y': .1}
            size_hint: .1, .8 
            cursor_size: 60, 60
            on_value: root.slide_it(*args)

        ModifiedSlider:
            id: right_motor_control
            min: -100
            max: 100
            step: 1
            value: ((self.max - self.min) / 2) + self.min
            orientation: "vertical"
            pos_hint: {'right': 0.75, 'y': .1}
            size_hint: .1, .8 
            cursor_size: 60, 60
            on_value: root.slide_it(*args)


<BluetoothWindow>: # class rule
    name: "bluetooth"

    Image:
        source: 'Images_Used/background6.jpg'
        allow_stretch: True
        keep_ratio: False

    GridLayout:
        cols: 2
        
        FloatLayout:
            size: root.width, root.height

            Label:
                text: "Bluetooth Scanning"
                size_hint: 1, .1
                pos_hint: {'x': 0, 'top': 0.95}
                font_size: self.width/20

            Label:
                id: PageStatus_LabelObj
                text: "Ready"
                font_size: self.width/8
                size_hint: 0.24, 0.05
                pos_hint: {'x': 0.01, 'top': 0.99}
                color: '#b5f7e6'
                canvas.before:
                    Color:
                        rgba: utils.get_color_from_hex('#266352')
                    Rectangle:
                        size: self.size
                        pos: self.pos
            
            Button:
                id: ScanDevice
                text: "Scan\nDevices"
                halign: 'center'
                font_size: self.width/8
                on_press: self.parent.parent.parent.scanDevice()
                size_hint: 0.35, 0.2
                pos_hint: {'x': 0.1, 'top': 0.8}
                background_normal: ''
                background_color: '#266352'

            Button:
                text: "Scan\nServices"
                halign: 'center'
                font_size: self.width/8
                on_press: self.parent.parent.parent.update_status()
                size_hint: 0.35, 0.2
                pos_hint: {'x': 0.5, 'top': 0.8}
                background_normal: ''
                background_color: '#266352'

            GridLayout:
                rows: 3
                size_hint: 0.9, 0.2
                pos_hint: {'x': 0.05, 'top': 0.6}

                Label:
                    text: "Optional Service Search Criteria"
                    font_size: self.width/30

                GridLayout:
                    cols: 2

                    Label:
                        text: "Name"
                        size_hint: (0.3 , 1)
                        font_size: self.parent.width/30
                        color: '#b5f7e6'
                        canvas.before:
                            Color:
                                rgba: utils.get_color_from_hex('#266352')
                            Rectangle:
                                size: self.size
                                pos: self.pos

                    TextInput:
                        id: Name
                        multiline: False

                GridLayout:
                    cols: 2

                    Label:
                        text: "Address"
                        size_hint: (0.3 , 1)
                        font_size: self.parent.width/30
                        color: '#b5f7e6'
                        canvas.before:
                            Color:
                                rgba: utils.get_color_from_hex('#266352')
                            Rectangle:
                                size: self.size
                                pos: self.pos

                    TextInput:
                        id: Address
                        multiline: False

            Label:
                text: "error code for connecting?"
                font_size: self.width/30
                size_hint: 0.9, 0.05
                pos_hint: {'x': 0.05, 'top': 0.35}
                color: '#b5f7e6'
                canvas.before:
                    Color:
                        rgba: utils.get_color_from_hex('#266352')
                    Rectangle:
                        size: self.size
                        pos: self.pos

            Label:
                text: "error code for connecting?"
                font_size: self.width/30
                size_hint: 0.9, 0.05
                pos_hint: {'x': 0.05, 'top': 0.35}
                color: '#b5f7e6'
                canvas.before:
                    Color:
                        rgba: utils.get_color_from_hex('#266352')
                    Rectangle:
                        size: self.size
                        pos: self.pos
            
            Button:
                text: "Cancel Pair"
                font_size: '15dp'
                size_hint: 0.8, 0.1
                pos_hint: {'x': 0.08, 'top': 0.3}

            Button:
                text: "Go Back"
                font_size: '15dp'
                on_release: app.root.current = "control"
                background_normal: ''
                background_color: '#266352'
                size_hint: 0.8, 0.1
                pos_hint: {'x': 0.1, 'top': 0.2}
        
        FloatLayout:

            Label:
                text: "displaying #"
                size_hint: 0.9, 0.05
                pos_hint: {'x': 0, 'top': 1}

            Button:
                text: "+1 elem"
                size_hint: 0.45, 0.05
                pos_hint: {'x': 0, 'top': 0.95}
                on_press: root.increment_elem()

            Button:
                text: "-1 elem"
                size_hint: 0.45, 0.05
                pos_hint: {'x': 0.5, 'top': 0.95}
                on_press: root.decrement_elem()


            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                id: ScanResults_ScrollViewObj
                size_hint: 0.95, 0.85
                pos_hint: {'x': 0, 'top': 0.9}
                canvas.before:
                    Color:
                        rgba: utils.get_color_from_hex('#266352')
                    Rectangle:
                        size: self.size
                        pos: self.pos

                GridLayout:
                    width: self.parent.width
                    id: grid1
                    size_hint_x: 1
                    size_hint_y: None
                    cols: 1
                    row_default_height: self.parent.height /4 
                    row_force_default: True
